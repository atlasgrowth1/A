<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>HVAC Pro - Modern Cooling & Heating Services</title>
  <meta name="description" content="Professional HVAC services, air conditioning repair, heating solutions, and more.">
  <!-- Modern CSS framework -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/modern-normalize@2.0.0/modern-normalize.min.css">
  <!-- Custom styles -->
  <style>
    :root {
      --primary: #0072CE;
      --primary-dark: #005b9f; 
      --secondary: #ff7a00;
      --dark: #212529;
      --light: #f8f9fa;
      --gray: #6c757d;
      --success: #28a745;
      --warning: #ffc107;
      --danger: #dc3545;
      --font-main: 'Inter', -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", sans-serif;
      --transition: all 0.3s ease;
    }

    /* Base Styles */
    html {
      scroll-behavior: smooth;
    }

    body {
      font-family: var(--font-main);
      line-height: 1.6;
      color: var(--dark);
      background-color: var(--light);
      overflow-x: hidden;
      margin: 0;
      padding: 0;
    }

    h1, h2, h3, h4, h5, h6 {
      font-weight: 700;
      line-height: 1.2;
      margin-bottom: 1rem;
    }

    a {
      color: var(--primary);
      text-decoration: none;
      transition: var(--transition);
    }

    a:hover {
      color: var(--primary-dark);
    }

    img {
      max-width: 100%;
      height: auto;
    }

    .container {
      width: 100%;
      max-width: 1200px;
      margin: 0 auto;
      padding: 0 2rem;
    }

    .btn {
      display: inline-block;
      font-weight: 600;
      text-align: center;
      white-space: nowrap;
      vertical-align: middle;
      user-select: none;
      border: 1px solid transparent;
      padding: 0.75rem 1.5rem;
      font-size: 1rem;
      line-height: 1.5;
      border-radius: 0.25rem;
      transition: var(--transition);
      cursor: pointer;
    }

    .btn-primary {
      color: white;
      background-color: var(--primary);
      border-color: var(--primary);
    }

    .btn-primary:hover {
      background-color: var(--primary);
      filter: brightness(90%);
      border-color: var(--primary);
      transform: translateY(-2px);
      box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
    }

    .btn-secondary {
      color: white;
      background-color: var(--secondary);
      border-color: var(--secondary);
    }

    .btn-secondary:hover {
      background-color: var(--secondary);
      filter: brightness(90%);
      border-color: var(--secondary);
      transform: translateY(-2px);
      box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
    }

    .text-center {
      text-align: center;
    }

    .mb-1 { margin-bottom: 0.5rem; }
    .mb-2 { margin-bottom: 1rem; }
    .mb-3 { margin-bottom: 1.5rem; }
    .mb-4 { margin-bottom: 2rem; }
    .mb-5 { margin-bottom: 3rem; }

    .mt-1 { margin-top: 0.5rem; }
    .mt-2 { margin-top: 1rem; }
    .mt-3 { margin-top: 1.5rem; }
    .mt-4 { margin-top: 2rem; }
    .mt-5 { margin-top: 3rem; }

    .py-1 { padding-top: 0.5rem; padding-bottom: 0.5rem; }
    .py-2 { padding-top: 1rem; padding-bottom: 1rem; }
    .py-3 { padding-top: 1.5rem; padding-bottom: 1.5rem; }
    .py-4 { padding-top: 2rem; padding-bottom: 2rem; }
    .py-5 { padding-top: 3rem; padding-bottom: 3rem; }

    .px-1 { padding-left: 0.5rem; padding-right: 0.5rem; }
    .px-2 { padding-left: 1rem; padding-right: 1rem; }
    .px-3 { padding-left: 1.5rem; padding-right: 1.5rem; }
    .px-4 { padding-left: 2rem; padding-right: 2rem; }
    .px-5 { padding-left: 3rem; padding-right: 3rem; }

    /* Header Styles */
    header {
      background-color: white;
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      z-index: 1000;
      transition: var(--transition);
      box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
    }

    header.scrolled {
      box-shadow: 0 5px 20px rgba(0, 0, 0, 0.15);
    }

    .top-bar {
      background-color: var(--primary);
      padding: 0.5rem 0;
      color: white;
    }

    .top-bar-content {
      display: flex;
      justify-content: flex-end;
      align-items: center;
      padding: 0 2rem;
    }

    .header-container {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 1rem 2rem;
    }

    .logo {
      font-size: 1.8rem;
      font-weight: 700;
      color: var(--primary);
      display: flex;
      align-items: center;
      transition: transform 0.3s ease;
    }

    .logo:hover {
      transform: scale(1.05);
    }

    .logo-icon {
      margin-right: 0.7rem;
      color: var(--secondary);
      font-size: 1.6rem;
    }

    nav {
      flex-grow: 1;
      display: flex;
      justify-content: center;
    }

    .nav-links {
      display: flex;
      list-style: none;
      margin: 0;
      padding: 0;
      justify-content: center;
    }

    .nav-links li {
      margin: 0 1.5rem;
    }

    .nav-links a {
      color: var(--dark);
      font-weight: 600;
      position: relative;
      padding: 0.5rem 0;
      font-size: 1.05rem;
    }

    .nav-links a:after {
      content: '';
      position: absolute;
      width: 0;
      height: 3px;
      bottom: -5px;
      left: 0;
      background-color: var(--secondary);
      transition: var(--transition);
    }

    .nav-links a:hover:after {
      width: 100%;
    }

    .contact-info {
      display: flex;
      align-items: center;
    }

    .phone-number {
      font-weight: 600;
      color: white;
      margin-left: 0.5rem;
    }

    .contact-icon {
      color: rgba(255, 255, 255, 0.8);
    }

    .login-button {
      display: inline-flex;
      align-items: center;
      gap: 0.3rem;
      background-color: rgba(255, 255, 255, 0.15);
      color: white;
      font-size: 0.9rem;
      font-weight: 500;
      padding: 0.4rem 0.8rem;
      border-radius: 4px;
      transition: all 0.3s ease;
      margin-left: 1.5rem;
    }

    .login-button:hover {
      background-color: rgba(255, 255, 255, 0.25);
      color: white;
      transform: translateY(-2px);
      box-shadow: 0 3px 8px rgba(0, 0, 0, 0.1);
    }

    .reviews-badge {
      display: inline-flex;
      align-items: center;
      background-color: rgba(255, 255, 255, 0.15);
      padding: 0.4rem 0.8rem;
      border-radius: 4px;
      margin-left: 1.5rem;
      color: white;
    }

    .reviews-badge .stars {
      color: var(--warning);
      margin-right: 0.5rem;
      font-size: 0.9rem;
    }

    .reviews-badge .reviews-count {
      font-size: 0.9rem;
      font-weight: 500;
    }

    .reviews-badge-mobile {
      display: flex;
      align-items: center;
      margin-top: 0.5rem;
    }

    .reviews-badge-mobile .stars {
      color: var(--warning);
      margin-right: 0.5rem;
    }

    /* Hero Section Improvements */
    .hero-badge {
      display: inline-flex;
      background-color: rgba(255, 255, 255, 0.2);
      backdrop-filter: blur(10px);
      padding: 0.5rem 1rem;
      border-radius: 50px;
      margin-bottom: 1rem;
    }

    .hero-badge .badge-content {
      display: flex;
      align-items: center;
      gap: 0.5rem;
      color: white;
      font-weight: 600;
    }

    .hero-badge i {
      color: var(--warning);
    }

    .hero-trust-indicators {
      display: flex;
      align-items: center;
      gap: 1.5rem;
      margin: 1.5rem 0;
    }

    .trust-item {
      display: flex;
      align-items: center;
      gap: 0.5rem;
      color: white;
    }

    .trust-item i {
      color: var(--warning);
    }

    .mobile-toggle {
      display: none;
      background: none;
      border: none;
      cursor: pointer;
      font-size: 1.5rem;
      color: var(--primary);
      z-index: 1001;
    }

    .mobile-contact-info {
      display: none;
    }

    /* Top Bar Improvements */
    .top-bar-content {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 0.5rem 2rem;
    }

    .top-bar-left {
      display: flex;
      align-items: center;
    }

    .google-reviews-badge {
      display: flex;
      align-items: center;
      gap: 0.5rem;
      color: white;
    }

    .star-rating-small {
      display: flex;
      align-items: center;
      gap: 0.3rem;
      color: white;
    }

    .stars-small {
      color: var(--warning);
      font-size: 0.9rem;
    }

    .reviews-count-small {
      font-size: 0.9rem;
    }

    /* Hero Section - Clean, Modern Design */
    .hero {
      position: relative;
      height: 80vh;
      min-height: 500px;
      margin-top: 4.5rem;
      overflow: hidden;
      display: flex;
      align-items: center;
      text-align: center; /* Center text on all screen sizes */
    }

    .hero-background {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      z-index: 0;
      background: linear-gradient(90deg, rgba(0,0,0,0.85) 0%, rgba(0,0,0,0.4) 100%);
    }

    .hero-image {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      object-fit: cover;
      z-index: -1;
      transform: scale(1);
      transition: transform 10s ease;
      filter: brightness(0.9); /* Slightly reduce brightness */
    }

    .hero.loaded .hero-image {
      transform: scale(1.05);
    }

    .hero-content-wrapper {
      width: 100%;
      max-width: 1200px;
      margin: 0 auto;
      position: relative;
      z-index: 1;
      padding: 0 2rem;
      display: flex;
      flex-direction: column;
      align-items: center; /* Center content vertically */
    }

    .hero-text {
      max-width: 600px;
      color: white;
      animation: fadeInUp 0.8s ease-out;
    }

    .hero-text h1 {
      font-size: 4rem;
      font-weight: 800;
      line-height: 1.1;
      margin-bottom: 0.8rem;
      text-shadow: 0 2px 4px rgba(0,0,0,0.5); /* Darker text shadow */
    }

    .hero-text h2 {
      font-size: 1.7rem;
      font-weight: 400;
      margin-bottom: 2rem;
      opacity: 0.9;
    }

    .hero-rating {
      display: flex;
      align-items: center;
      margin-bottom: 2.5rem;
      gap: 1rem;
    }

    .hero-rating .stars {
      color: var(--warning);
      font-size: 1.3rem;
      display: flex;
      align-items: center;
    }

    .hero-rating .stars i {
      margin-right: 0.2rem;
    }

    .hero-rating .stars span {
      margin-left: 0.5rem;
      color: white;
      font-weight: 700;
    }

    .hero-buttons {
      display: flex;
      gap: 1.5rem;
    }

    .hero-buttons a {
      display: inline-flex;
      align-items: center;
      justify-content: center;
      padding: 1rem 2rem;
      border-radius: 50px;
      font-weight: 600;
      font-size: 1.1rem;
      transition: all 0.3s ease;
      text-decoration: none;
    }

    .hero-buttons a:first-child {
      background-color: var(--secondary);
      color: white;
    }

    .hero-buttons a:first-child:hover {
      background-color: #e66e00;
      transform: translateY(-3px);
      box-shadow: 0 8px 15px rgba(0, 0, 0, 0.2);
    }

    .hero-buttons a:last-child {
      background-color: var(--primary);
      color: white;
    }

    .hero-buttons a:last-child:hover {
      background-color: var(--primary-dark);
      transform: translateY(-3px);
      box-shadow: 0 8px 15px rgba(0, 0, 0, 0.2);
    }

    @keyframes fadeInUp {
      from {
        opacity: 0;
        transform: translateY(30px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    .hero-card {
      background: rgba(255, 255, 255, 0.95);
      border-radius: 16px;
      overflow: hidden;
      max-width: 350px;
      box-shadow: 0 20px 40px rgba(0, 0, 0, 0.2);
      animation: fadeInRight 1s ease-out;
      transition: transform 0.3s ease;
    }

    .hero-card:hover {
      transform: translateY(-10px);
    }

    .hero-card-header {
      background-color: var(--primary);
      color: white;
      padding: 1.2rem;
      font-weight: 600;
      text-align: center;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 0.5rem;
      font-size: 1.1rem;
    }

    .hero-card-body {
      padding: 2rem;
      color: var(--dark);
    }

    .hero-card-body h3 {
      font-size: 1.5rem;
      margin-bottom: 1rem;
      color: var(--primary);
    }

    .hero-card-body p {
      margin-bottom: 1.5rem;
      color: #555;
      line-height: 1.5;
    }

    .hero-card-phone {
      background-color: rgba(0, 114, 206, 0.1);
      padding: 1.2rem;
      border-radius: 10px;
      display: flex;
      align-items: center;
      gap: 0.8rem;
      justify-content: center;
      transition: all 0.3s ease;
    }

    .hero-card-phone:hover {
      background-color: rgba(0, 114, 206, 0.2);
    }

    .hero-card-phone i {
      color: var(--primary);
      animation: pulse 2s infinite;
    }

    .hero-card-phone a {
      font-weight: 700;
      color: var(--primary);
      font-size: 1.2rem;
    }

    @keyframes fadeInLeft {
      from {
        opacity: 0;
        transform: translateX(-30px);
      }
      to {
        opacity: 1;
        transform: translateX(0);
      }
    }

    @keyframes fadeInRight {
      from {
        opacity: 0;
        transform: translateX(30px);
      }
      to {
        opacity: 1;
        transform: translateX(0);
      }
    }

    @keyframes pulse {
      0% {
        transform: scale(1);
      }
      50% {
        transform: scale(1.2);
      }
      100% {
        transform: scale(1);
      }
    }

    /* Services Section */
    .services {
      padding: 5rem 0;
      background-color: white;
    }

    .section-title {
      font-size: 2.5rem;
      color: var(--dark);
      text-align: center;
      margin-bottom: 3rem;
      position: relative;
    }

    .section-title:after {
      content: '';
      display: block;
      width: 80px;
      height: 4px;
      background-color: var(--secondary);
      margin: 1rem auto 0;
      border-radius: 2px;
    }

    .services-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
      gap: 2rem;
    }

    .service-card {
      background-color: white;
      border-radius: 8px;
      overflow: hidden;
      box-shadow: 0 5px 15px rgba(0, 0, 0, 0.05);
      transition: var(--transition);
    }

    .service-card:hover {
      transform: translateY(-10px);
      box-shadow: 0 15px 30px rgba(0, 0, 0, 0.1);
    }

    .service-icon {
      font-size: 3rem;
      color: var(--primary);
      margin-bottom: 1rem;
      display: block;
      text-align: center;
    }

    .service-title {
      font-size: 1.5rem;
      text-align: center;
      margin-bottom: 1rem;
    }

    .service-description {
      color: var(--gray);
      text-align: center;
      padding: 0 1.5rem 2rem;
    }

    /* About Section */
    .about {
      padding: 5rem 0;
      background-color: #f9f9f9;
      position: relative;
      overflow: hidden;
    }

    .about::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      height: 8px;
      background: linear-gradient(to right, var(--primary), var(--secondary));
    }

    .about-grid {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 4rem;
      align-items: center;
    }

    .about-image {
      border-radius: 12px;
      overflow: hidden;
      box-shadow: 0 16px 40px rgba(0, 0, 0, 0.15);
      position: relative;
      transform: perspective(1000px) rotateY(-5deg);
      transition: transform 0.5s ease;
    }

    .about-image:hover {
      transform: perspective(1000px) rotateY(0deg);
    }

    .about-image img {
      width: 100%;
      height: 100%;
      object-fit: cover;
      transition: transform 0.5s ease;
    }

    .about-image:hover img {
      transform: scale(1.05);
    }

    .about-content h2 {
      font-size: 2.5rem;
      margin-bottom: 1.5rem;
      position: relative;
      padding-bottom: 0.8rem;
    }

    .about-content h2:after {
      content: '';
      position: absolute;
      left: 0;
      bottom: 0;
      width: 80px;
      height: 4px;
      background-color: var(--secondary);
      border-radius: 2px;
    }

    .about-content p {
      margin-bottom: 1.5rem;
      color: var(--gray);
      font-size: 1.1rem;
      line-height: 1.7;
    }

    .highlight {
      color: var(--primary);
      font-weight: 600;
    }

    .about-features {
      display: flex;
      gap: 2rem;
      margin-top: 2rem;
      flex-wrap: wrap;
    }

    .about-feature {
      display: flex;
      align-items: center;
      gap: 0.5rem;
    }

    .feature-icon {
      color: var(--secondary);
      font-size: 1.2rem;
    }

    /* Reviews Section */
    .reviews {
      padding: 5rem 0;
      background-color: white;
      position: relative;
    }

    .reviews::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background-image: url("data:image/svg+xml,%3Csvg width='20' height='20' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='%23f0f0f0' fill-opacity='0.3' fill-rule='evenodd'%3E%3Ccircle cx='3' cy='3' r='3'/%3E%3Ccircle cx='13' cy='13' r='3'/%3E%3C/g%3E%3C/svg%3E");
      opacity: 0.3;
      z-index: 0;
    }

    .reviews-header {
      display: flex;
      align-items: center;
      justify-content: space-between;
      margin-bottom: 2.5rem;
    }

    .review-link {
      display: inline-flex;
      align-items: center;
      gap: 0.5rem;
      font-weight: 500;
      transition: all 0.3s ease;
    }

    .review-link:hover {
      transform: translateX(3px);
    }

    .review-link i {
      transition: transform 0.3s ease;
    }

    .review-link:hover i {
      transform: translateX(3px);
    }

    .reviews-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
      gap: 2rem;
      position: relative;
      z-index: 1;
    }

    /* Review Slider */
    .reviews-slider {
      display: flex;
      gap: 2rem;
      overflow-x: auto;
      scroll-behavior: smooth;
      padding: 1rem 0.5rem;
      scrollbar-width: none; /* For Firefox */
      -ms-overflow-style: none; /* For Internet Explorer and Edge */
      position: relative;
      margin: 0 -0.5rem;
    }

    /* Hide scrollbar for Chrome, Safari and Opera */
    .reviews-slider::-webkit-scrollbar {
      display: none;
    }

    .reviews-slider .review-card {
      flex: 0 0 350px;
      max-width: 350px;
    }

    /* Slider Controls */
    .slider-controls {
      display: flex;
      justify-content: center;
      gap: 1rem;
      margin-top: 2rem;
    }

    .slider-arrow {
      width: 40px;
      height: 40px;
      background-color: white;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1);
      cursor: pointer;
      transition: all 0.3s ease;
      color: var(--primary);
      border: 1px solid rgba(0, 0, 0, 0.05);
    }

    .slider-arrow:hover {
      background-color: var(--primary);
      color: white;
      transform: translateY(-3px);
    }

    .slider-progress {
      display: flex;
      gap: 0.5rem;
      margin-top: 1.5rem;
      justify-content: center;
    }

    .progress-dot {
      width: 10px;
      height: 10px;
      border-radius: 50%;
      background-color: #e0e0e0;
      cursor: pointer;
      transition: all 0.3s ease;
    }

    .progress-dot.active {
      background-color: var(--primary);
      transform: scale(1.3);
    }

    .review-card {
      background-color: white;
      border-radius: 12px;
      padding: 2rem;
      box-shadow: 0 8px 20px rgba(0, 0, 0, 0.05);
      transition: var(--transition);
      border: 1px solid rgba(0, 0, 0, 0.05);
      position: relative;
      overflow: hidden;
    }

    .review-card::before {
      content: '"';
      position: absolute;
      top: -20px;
      left: 10px;
      font-size: 120px;
      color: rgba(0, 0, 0, 0.03);
      font-family: Georgia, serif;
      line-height: 1;
    }

    .review-card:hover {
      transform: translateY(-8px);
      box-shadow: 0 15px 30px rgba(0, 0, 0, 0.1);
    }

    .stars {
      color: var(--warning);
      font-size: 1.2rem;
      margin-bottom: 1rem;
      display: flex;
      gap: 2px;
    }

    .review-text {
      font-style: italic;
      margin-bottom: 1.5rem;
      color: var(--gray);
      line-height: 1.6;
      position: relative;
      z-index: 1;
      overflow: hidden;
      text-overflow: ellipsis;
      display: -webkit-box;
      -webkit-line-clamp: 5; /* Limit to 5 lines */
      -webkit-box-orient: vertical;
      max-height: 8rem;
    }

    .reviewer {
      font-weight: 600;
      display: flex;
      align-items: center;
      gap: 0.5rem;
    }

    .reviewer-img {
      width: 40px;
      height: 40px;
      border-radius: 50%;
      background-color: var(--primary);
      color: white;
      display: flex;
      align-items: center;
      justify-content: center;
      font-weight: 700;
      font-size: 1.2rem;
    }

    .review-date {
      margin-top: 0.5rem;
      font-size: 0.8rem;
      color: var(--gray);
    }

    /* CTA Section */
    .cta {
      position: relative;
      padding: 5rem 0;
      background-color: var(--primary);
      color: white;
      text-align: center;
      overflow: hidden;
    }

    .cta::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background-image: url("data:image/svg+xml,%3Csvg width='60' height='60' viewBox='0 0 60 60' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='none' fill-rule='evenodd'%3E%3Cgfill='%23ffffff' fill-opacity='0.05'%3E%3Cpath d='M36 34v-4h-2v4h-4v2h4v4h2v-4h4v-2h-4zm0-30V0h-2v4h-4v2h4v4h2V6h4V4h-4zM6 34v-4H4v4H0v2h4v4h2v-4h4v-2H6zM6 4V0H4v4H0v2h4v4h2V6h4V4H6z'/%3E%3C/g%3E%3C/g%3E%3C/svg%3E");
      z-index: 0;
    }

    .cta-content {
      position: relative;
      z-index: 1;
    }

    .cta h2 {
      font-size: 2.5rem;
      margin-bottom: 1.5rem;
      position: relative;
      display: inline-block;
    }

    .cta h2::after {
      content: '';
      position: absolute;
      left: 50%;
      bottom: -10px;
      transform: translateX(-50%);
      width: 80px;
      height: 4px;
      background-color: var(--secondary);
      border-radius: 2px;
    }

    .cta p {
      font-size: 1.2rem;
      max-width: 700px;
      margin: 1.5rem auto 2rem;
      opacity: 0.9;
    }

    .cta-buttons {
      display: flex;
      justify-content: center;
      gap: 1rem;
      margin-top: 2rem;
    }

    .financing-box {
      background-color: rgba(255, 255, 255, 0.1);
      border-radius: 12px;
      padding: 1.5rem;
      margin-top: 2rem;
      backdrop-filter: blur(5px);
      max-width: 800px;
      margin-left: auto;
      margin-right: auto;
    }

    .financing-title {
      font-size: 1.5rem;
      margin-bottom: 1rem;
      color: white;
      font-weight: 600;
    }

    .financing-text {
      color: rgba(255, 255, 255, 0.9);
      margin-bottom: 1rem;
    }

    /* Location Section */
    .location {
      padding: 5rem 0;
      background-color: #f8f8f8;
      position: relative;
    }

    .location-grid {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 3rem;
      align-items: center;
    }

    .location-map {
      border-radius: 12px;
      overflow: hidden;
      box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
      position: relative;
      height: 400px;
      background-color: #e9e9e9;
    }

    .map-container {
      height: 100%;
      width: 100%;
      position: relative;
    }

    .static-map {
      width: 100%;
      height: 100%;
      object-fit: cover;
    }

    .map-overlay {
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      display: flex;
      align-items: center;
      justify-content: center;
      background-color: rgba(0, 0, 0, 0.05);
      transition: all 0.3s ease;
    }

    .map-overlay:hover {
      background-color: rgba(0, 0, 0, 0.15);
    }

    .map-btn {
      background-color: white;
      color: var(--dark);
      padding: 0.75rem 1.5rem;
      border-radius: 30px;
      font-weight: 600;
      box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
      transition: all 0.3s ease;
      display: flex;
      align-items: center;
      gap: 0.5rem;
    }

    .map-btn:hover {
      transform: translateY(-3px);
      box-shadow: 0 8px 20px rgba(0, 0, 0, 0.15);
    }

    .location-content h2 {
      font-size: 2.5rem;
      margin-bottom: 1.5rem;
      position: relative;
      padding-bottom: 0.8rem;
    }

    .location-content h2:after {
      content: '';
      position: absolute;
      left: 0;
      bottom: 0;
      width: 80px;
      height: 4px;
      background-color: var(--secondary);
      border-radius: 2px;
    }

    .location-info {
      margin-top: 2rem;
    }

    .location-item {
      display: flex;
      align-items: flex-start;
      margin-bottom: 1.5rem;
    }

    .location-icon {
      color: var(--primary);
      font-size: 1.2rem;
      margin-right: 1rem;
      margin-top: 0.2rem;
    }

    .location-text h3 {
      font-size: 1.2rem;
      margin-bottom: 0.5rem;
    }

    .location-text p {
      color: var(--gray);
      line-height: 1.6;
    }

    .service-areas {
      margin-top: 2rem;
    }

    .service-areas h3 {
      font-size: 1.2rem;
      margin-bottom: 1rem;
    }

    .areas-list {
      display: flex;
      flex-wrap: wrap;
      gap: 0.5rem;
    }

    .area-tag {
      background-color: #f0f0f0;
      color: var(--dark);
      padding: 0.3rem 0.8rem;
      border-radius: 30px;
      font-size: 0.9rem;
      transition: all 0.3s ease;
    }

    .area-tag:hover {
      background-color: var(--primary);
      color: white;
    }

    /* Footer */
    footer {
      background-color: var(--dark);
      color: white;
      padding: 4rem 0 2rem;
    }

    .footer-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
      gap: 2rem;
      margin-bottom: 3rem;
    }

    .footer-column h3 {
      font-size: 1.2rem;
      margin-bottom: 1.5rem;
      position: relative;
    }

    .footer-column h3:after {
      content: '';
      display: block;
      width: 40px;
      height: 3px;
      background-color: var(--secondary);
      margin-top: 0.5rem;
    }

    .footer-links {
      list-style: none;
      padding: 0;
      margin: 0;
    }

    .footer-links li {
      margin-bottom: 0.5rem;
    }

    .footer-links a {
      color: rgba(255, 255, 255, 0.7);
      transition: var(--transition);
    }

    .footer-links a:hover {
      color: white;
    }

    .contact-item {
      display: flex;
      align-items: flex-start;
      margin-bottom: 1rem;
    }

    .contact-icon {
      margin-right: 1rem;
      font-size: 1.2rem;
      color: var(--secondary);
    }

    .social-links {
      display: flex;
      gap: 1rem;
      margin-top: 1.5rem;
    }

    .social-icon {
      display: flex;
      align-items: center;
      justify-content: center;
      width: 40px;
      height: 40px;
      border-radius: 50%;
      background-color: rgba(255, 255, 255, 0.1);
      color: white;
      transition: var(--transition);
    }

    .social-icon:hover {
      background-color: var(--primary);
      transform: translateY(-3px);
    }

    .copyright {
      text-align: center;
      padding-top: 2rem;
      border-top: 1px solid rgba(255, 255, 255, 0.1);
      color: rgba(255, 255, 255, 0.6);
      font-size: 0.9rem;
    }

    .login-link {
      margin-left: 10px;
      color: rgba(255, 255, 255, 0.8);
      text-decoration: none;
      padding: 3px 8px;
      border-radius: 4px;
      background-color: rgba(255, 255, 255, 0.1);
      transition: all 0.3s ease;
    }

    .login-link:hover {
      background-color: rgba(255, 255, 255, 0.2);
      color: white;
    }

    /* Animations */
    @keyframes fadeInUp {
      from {
        opacity: 0;
        transform: translateY(30px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    .fade-in {
      opacity: 0;
      transform: translateY(30px);
      transition: opacity 0.6s ease, transform 0.6s ease;
    }

    .fade-in.visible {
      opacity: 1;
      transform: translateY(0);
    }

    /* Responsive Styles */
    @media (max-width: 992px) {
      .hero-title {
        font-size: 2.7rem;
      }

      .about-grid {
        grid-template-columns: 1fr;
        gap: 2rem;
      }

      .about-image {
        order: -1;
        max-height: 400px;
      }

      .about-image img {
        width: 100%;
        height: 400px;
        object-fit: cover;
      }
    }

    @media (max-width: 992px) {
      nav {
        flex-grow: 0;
      }

      .nav-links li {
        margin: 0 1rem;
      }
    }

    @media (max-width: 992px) {
      .hero-text {
        max-width: 100%;
      }

      .hero-text h1 {
        font-size: 3.5rem;
      }

      .hero-text h2 {
        font-size: 1.5rem;
      }
    }

    @media (max-width: 768px) {
      .top-bar-content {
        justify-content: space-between;
        padding: 0 1rem;
      }

      .header-container {
        padding: 0.8rem 1rem;
      }

      nav {
        position: static;
      }

      .nav-links {
        position: fixed;
        top: 0;
        right: -100%;
        width: 70%;
        height: 100vh;
        background-color: white;
        flex-direction: column;
        padding: 5rem 2rem 2rem;
        box-shadow: -5px 0 15px rgba(0, 0, 0, 0.1);
        transition: right 0.3s ease;
        z-index: 999;
        align-items: flex-start;
      }

      .nav-links.active {
        right: 0;
      }

      .nav-links li {
        margin: 1rem 0;
        width: 100%;
      }

      .nav-links a {
        display: block;
        padding: 0.5rem 0;
        font-size: 1.2rem;
      }

      .mobile-toggle {
        display: block;
        z-index: 1000;
      }

      .mobile-contact-info {
        display: flex;
        align-items: center;
        margin-top: 2rem;
        padding-top: 1rem;
        border-top: 1px solid rgba(0, 0, 0, 0.1);
        width: 100%;
      }

      .mobile-contact-info .phone-number {
        color: var(--primary);
      }

      .hero {
        height: auto;
        min-height: 450px;
      }

      .hero-text {
        text-align: center;
      }

      .hero-text h1 {
        font-size: 3rem;
      }

      .hero-text h2 {
        font-size: 1.4rem;
      }

      .hero-rating {
        justify-content: center;
      }

      .hero-buttons {
        flex-direction: column;
        gap: 1rem;
      }

      .hero-buttons a {
        width: 100%;
      }
    }

    @media (max-width: 576px) {
      .container {
        padding: 0 1rem;
      }

      .section-title {
        font-size: 2rem;
      }

      .hero {
        margin-top: 4rem;
        min-height: 400px;
      }

      .hero-content-wrapper {
        padding: 0 1.5rem;
      }

      .hero-text h1 {
        font-size: 2.5rem;
      }

      .hero-text h2 {
        font-size: 1.2rem;
        margin-bottom: 1.5rem;
      }

      .hero-rating {
        margin-bottom: 1.5rem;
        flex-direction: column;
        align-items: center;
        gap: 0.5rem;
      }

      .top-bar-left {
        display: none;
      }

      .top-bar-content {
        justify-content: center;
      }

      .service-card, .review-card {
        max-width: 100%;
      }
    }
  </style>
  <!-- Load Font Awesome for icons -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <!-- Load Inter font -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
</head>
<body>
  <!-- Header -->
  <header id="header">
    <div class="top-bar">
      <div class="container">
        <div class="top-bar-content">
          <div class="top-bar-left">
            <div class="google-reviews-badge">
              <i class="fab fa-google"></i>
              <div class="star-rating-small">
                <span class="stars-small">★★★★★</span>
                <span id="header-rating">5.0</span>
              </div>
              <span class="reviews-count-small">(<span id="header-reviews">149</span> reviews)</span>
            </div>
          </div>
          <div class="contact-info">
            <i class="fa-solid fa-phone contact-icon"></i>
            <a href="tel:" class="phone-number" id="phone-number-header">(205) 123-4567</a>
            <a href="/login" class="login-button">
              <i class="fa-solid fa-user"></i> Login
            </a>
          </div>
        </div>
      </div>
    </div>
    <div class="header-container">
      <a href="#" class="logo">
        <i class="fa-solid fa-snowflake logo-icon"></i>
        <span id="business-name-header">HVAC Pro</span>
      </a>

      <button class="mobile-toggle" id="mobile-toggle">
        <i class="fa-solid fa-bars"></i>
      </button>

      <nav>
        <ul class="nav-links" id="nav-links">
          <li><a href="#services">Services</a></li>
          <li><a href="#about">About Us</a></li>
          <li><a href="#reviews">Reviews</a></li>
          <li><a href="#contact">Contact</a></li>
          <!-- Mobile-only contact info -->
          <div class="mobile-contact-info">
            <i class="fa-solid fa-phone contact-icon"></i>
            <a href="tel:" class="phone-number" id="mobile-phone-number">(205) 123-4567</a>
            <div class="reviews-badge-mobile">
              <span class="stars">★★★★★</span>
              <span class="reviews-count"><span id="mobile-header-rating">5.0</span></span>
            </div>
          </div>
        </ul>
      </nav>
    </div>
  </header>

  <!-- Hero Section -->
  <section class="hero" id="hero">
    <div class="hero-background">
      <img src="https://images.unsplash.com/photo-1581094794329-c8112a89af12?ixlib=rb-4.0.3&auto=format&fit=crop&w=2000&q=80" alt="HVAC Services" class="hero-image" id="hero-image">
    </div>
    <div class="hero-content-wrapper">
      <div class="hero-text">
        <h1 id="business-name-hero">HVAC Pro</h1>
        <h2>Professional Heating & Cooling in <span id="city-name">Birmingham</span></h2>

        <div class="hero-rating">
          <div class="stars">
            <i class="fa-solid fa-star"></i><i class="fa-solid fa-star"></i><i class="fa-solid fa-star"></i><i class="fa-solid fa-star"></i><i class="fa-solid fa-star"></i>
            <span id="hero-rating-value">5.0</span>
          </div>
          <span id="review-count-badge">149+ Reviews</span>
        </div>

        <div class="hero-buttons">
          <a href="tel:" id="phone-btn">
            <i class="fa-solid fa-phone"></i> Call Now
          </a>
          <a href="#" id="chat-open-btn">
            <i class="fa-solid fa-message"></i> Chat With Us
          </a>
        </div>
      </div>
    </div>
  </section>

  <!-- Services Section -->
  <section class="services py-5" id="services">
    <div class="container">
      <h2 class="section-title fade-in">Our Professional Services</h2>
      <div class="services-grid">
        <div class="service-card fade-in">
          <div class="px-3 py-4">
            <i class="fa-solid fa-snowflake service-icon"></i>
            <h3 class="service-title">AC Repair & Service</h3>
            <p class="service-description">
              Our certified technicians provide expert AC repair, maintenance, and installation services to keep your home comfortable year-round.
            </p>
          </div>
        </div>

        <div class="service-card fade-in">
          <div class="px-3 py-4">
            <i class="fa-solid fa-fire service-icon"></i>
            <h3 class="service-title">Heating Services</h3>
            <p class="service-description">
              From furnace repair to heating system installation, we ensure your home stays warm and efficient during the cold months.
            </p>
          </div>
        </div>

        <div class="service-card fade-in">
          <div class="px-3 py-4">
            <i class="fa-solid fa-wind service-icon"></i>
            <h3 class="service-title">Air Quality Solutions</h3>
            <p class="service-description">
              Improve your indoor air quality with our advanced filtration systems, duct cleaning, and air purification services.
            </p>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- About Section -->
  <section class="about py-5" id="about">
    <div class="container">
      <div class="about-grid">
        <div class="about-content fade-in">
          <h2>Trusted HVAC Experts in <span id="city-state">Birmingham, AL</span></h2>
          <p>
            At <span class="highlight" id="business-name-about">HVAC Pro</span>, we provide reliable heating and cooling services with a commitment to quality and customer satisfaction. Our team of certified technicians brings years of experience to every job.
          </p>
          <p>
            Whether you need emergency AC repair, regular maintenance, or a complete system installation, we deliver excellent service at competitive prices. We understand the importance of a comfortable home and will work tirelessly to achieve it.
          </p>
          <p>
            Our dedication to using quality parts, providing honest recommendations, and standing behind our work has earned us a reputation as one of the most trusted HVAC companies in the area.
          </p>

          <div class="about-features">
            <div class="about-feature">
              <i class="fa-solid fa-certificate feature-icon"></i>
              <span>Licensed & Insured</span>
            </div>
            <div class="about-feature">
              <i class="fa-solid fa-clock feature-icon"></i>
              <span>24/7 Emergency Service</span>
            </div>
            <div class="about-feature">
              <i class="fa-solid fa-thumbs-up feature-icon"></i>
              <span>100% Satisfaction Guarantee</span>
            </div>
            <div class="about-feature">
              <i class="fa-solid fa-tools feature-icon"></i>
              <span>Experienced Technicians</span>
            </div>
          </div>

          <a href="#contact" class="btn btn-primary mt-4">
            Contact Us Today
          </a>
        </div>
        <div class="about-image fade-in">
          <img src="https://images.unsplash.com/photo-1621905251189-08b45d6a269e?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80" alt="Our HVAC Team" id="about-image">
        </div>
      </div>
    </div>
  </section>

  <!-- Reviews Section -->
  <section class="reviews py-5" id="reviews">
    <div class="container">
      <div class="reviews-header">
        <h2 class="section-title fade-in">What Our Customers Say</h2>
        <a href="#" class="review-link" id="google-reviews-link">
          See all reviews on Google <i class="fa-solid fa-arrow-right"></i>
        </a>
      </div>
      <div class="reviews-grid" id="reviews-container">
        <!-- Reviews will be populated dynamically -->
        <div class="review-card fade-in">
          <div class="stars">
            <i class="fa-solid fa-star"></i>
            <i class="fa-solid fa-star"></i>
            <i class="fa-solid fa-star"></i>
            <i class="fa-solid fa-star"></i>
            <i class="fa-solid fa-star"></i>
          </div>
          <p class="review-text">
            "Outstanding service! The technician arrived promptly, diagnosed our AC issue quickly, and had everything fixed within an hour. Highly recommend!"
          </p>
          <div class="reviewer">
            <div class="reviewer-img">J</div>
            <div>
              <div>James D.</div>
              <div class="review-date">3 months ago</div>
            </div>
          </div>
        </div>

        <div class="review-card fade-in">
          <div class="stars">
            <i class="fa-solid fa-star"></i>
            <i class="fa-solid fa-star"></i>
            <i class="fa-solid fa-star"></i>
            <i class="fa-solid fa-star"></i>
            <i class="fa-solid fa-star"></i>
          </div>
          <p class="review-text">
            "Professional, knowledgeable, and efficient. They replaced our entire HVAC system and the difference in air quality and efficiency is remarkable."
          </p>
          <div class="reviewer">
            <div class="reviewer-img">S</div>
            <div>
              <div>Sarah M.</div>
              <div class="review-date">1 month ago</div>
            </div>
          </div>
        </div>

        <div class="review-card fade-in">
          <div class="stars">
            <i class="fa-solid fa-star"></i>
            <i class="fa-solid fa-star"></i>
            <i class="fa-solid fa-star"></i>
            <i class="fa-solid fa-star"></i>
            <i class="fa-solid fa-star"></i>
          </div>
          <p class="review-text">
            "I've been using their maintenance service for years and my AC has never run better. The technicians are always courteous and thorough."
          </p>
          <div class="reviewer">
            <div class="reviewer-img">R</div>
            <div>
              <div>Robert J.</div>
              <div class="review-date">2 months ago</div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- CTA Section -->
  <section class="cta py-5" id="contact">
    <div class="container">
      <div class="cta-content">
        <h2 class="fade-in">Ready for Professional HVAC Service?</h2>
        <p class="fade-in">
          Contact us today for a free estimate and experience the difference professional service makes.
        </p>

        <div class="cta-buttons">
          <a href="tel:" class="btn btn-secondary fade-in" id="cta-phone-btn">
            <i class="fa-solid fa-phone"></i> <span id="phone-number-cta">(205) 123-4567</span>
          </a>

          <a href="#contact" class="btn btn-primary fade-in">
            <i class="fa-solid fa-calendar-check"></i> Schedule Service
          </a>
        </div>

        <div class="financing-box fade-in">
          <div class="financing-title">
            <i class="fa-solid fa-money-bill-wave"></i> Flexible Financing Available
          </div>
          <p class="financing-text">
            We offer convenient financing options to help you get the HVAC system your home needs. Apply online and get approved quickly with competitive rates and flexible terms.
          </p>
          <a href="#" class="btn btn-secondary btn-sm">
            Learn More About Financing
          </a>
        </div>
      </div>
    </div>
  </section>

  <!-- Location Section -->
  <section class="location py-5" id="location">
    <div class="container">
      <div class="location-grid">
        <div class="location-content fade-in">
          <h2>Our Location</h2>
          <p>
            Proudly serving <span id="location-city-state">Birmingham, AL</span> and surrounding areas with reliable HVAC services.
          </p>

          <div class="location-info">
            <div class="location-item">
              <i class="fa-solid fa-location-dot location-icon"></i>
              <div class="location-text">
                <h3>Address</h3>
                <p id="location-address">123 Main St, Birmingham, AL 35201</p>
              </div>
            </div>

            <div class="location-item">
              <i class="fa-solid fa-phone location-icon"></i>
              <div class="location-text">
                <h3>Phone</h3>
                <p><a href="tel:" id="location-phone">(205) 123-4567</a></p>
              </div>
            </div>

            <div class="location-item">
              <i class="fa-solid fa-clock location-icon"></i>
              <div class="location-text">
                <h3>Hours</h3>
                <p id="location-hours">Monday - Friday: 8am - 5pm</p>
              </div>
            </div>
          </div>

          <div class="service-areas">
            <h3>Service Areas</h3>
            <div class="areas-list">
              <span class="area-tag" id="main-service-area">Birmingham</span>
              <span class="area-tag">Hoover</span>
              <span class="area-tag">Vestavia Hills</span>
              <span class="area-tag">Mountain Brook</span>
              <span class="area-tag">Homewood</span>
              <span class="area-tag">Trussville</span>
            </div>
          </div>
        </div>

        <div class="location-map fade-in">
          <div class="map-container">
            <img src="" alt="Map of our location" class="static-map" id="static-map">
            <div class="map-overlay">
              <a href="#" class="map-btn" id="directions-link" target="_blank">
                <i class="fa-solid fa-directions"></i> Get Directions
              </a>
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- Footer -->
  <footer>
    <div class="container">
      <div class="footer-grid">
        <div class="footer-column">
          <h3 id="business-name-footer">HVAC Pro</h3>
          <p>
            Professional heating and cooling services you can trust. Our experienced technicians provide quality solutions for all your HVAC needs.
          </p>
          <div class="social-links">
            <a href="#" class="social-icon" id="facebook-link">
              <i class="fab fa-facebook-f"></i>
            </a>
            <a href="#" class="social-icon" id="instagram-link">
              <i class="fab fa-instagram"></i>
            </a>
            <a href="#" class="social-icon" id="linkedin-link">
              <i class="fab fa-linkedin-in"></i>
            </a>
          </div>
        </div>

        <div class="footer-column">
          <h3>Our Services</h3>
          <ul class="footer-links">
            <li><a href="#services">AC Repair & Service</a></li>
            <li><a href="#services">Heating Services</a></li>
            <li><a href="#services">Air Quality Solutions</a></li>
            <li><a href="#services">HVAC Maintenance</a></li>
            <li><a href="#services">New System Installation</a></li>
          </ul>
        </div>

        <div class="footer-column">
          <h3>Contact Us</h3>
          <div class="contact-item">
            <i class="fa-solid fa-location-dot contact-icon"></i>
            <div id="full-address">123 Main St, Birmingham, AL 35201</div>
          </div>
          <div class="contact-item">
            <i class="fa-solid fa-phone contact-icon"></i>
            <div><a href="tel:" id="phone-number-footer">(205) 123-4567</a></div>
          </div>
          <div class="contact-item">
            <i class="fa-solid fa-envelope contact-icon"></i>
            <div><a href="mailto:" id="email-footer">info@hvacpro.com</a></div>
          </div>
          <div class="contact-item">
            <i class="fa-solid fa-clock contact-icon"></i>
            <div id="working-hours">Mon-Fri: 8AM-5PM</div>
          </div>
        </div>
      </div>

      <div class="copyright">
        <p>&copy; <span id="current-year">2025</span> <span id="business-name-copyright">HVAC Pro</span>. All Rights Reserved. 
          <a href="/login" class="login-link">Business Login</a>
        </p>
      </div>
    </div>
  </footer>

  <!-- Scripts -->
  <script>
    // Get the business data based on URL slug
    async function getBusinessData() {
      try {
        const response = await fetch('/businesses.json');
        const businesses = await response.json();

        // Get slug from URL (everything after the last /)
        let slug = window.location.pathname.split('/').pop();

        // If no slug or empty slug (homepage), show first business by default
        if (!slug || slug === '' || slug === 'index.html') {
          slug = businesses[0].slug;
        }

        // Find the business with matching slug
        const business = businesses.find(b => b.slug === slug) || businesses[0];

        // Use the business data to populate the page
        populatePage(business);
      } catch (error) {
        console.error('Error loading business data:', error);
      }
    }

    // Helper function to get phone as string
    function getPhoneAsString(phone) {
      // Hardcoded phone numbers mapped to business slugs
      const phoneMap = {
        "stegallheatingairconditioningandplumbing": "+1 205-251-0330",
        "birminghamheatingandairconditioning": "+1 659-226-4901",
        "coolrayheatingcoolingplumbingelectrical": "+1 205-315-0411",
        "temperaturepro": "+1 205-737-3821",
        "tigermechanicalservice": "+1 205-999-9984",
        "grissombrotherservicecompanyhvac": "+1 205-699-4013",
        "superiorcomfortheatingandcoolingllc": "+1 205-956-3777",
        "hillerplumbingheatingcoolingelectricalformerlyservicetechinc": "+1 205-386-4001",
        "birminghamhvacsolutions": "+1 205-956-9009",
        "hitechptacservicesalabama": "+1 205-978-7638"
      };

      // Get current business slug from URL
      const pathParts = window.location.pathname.split('/').filter(Boolean);
      const currentSlug = pathParts[0] || 'stegallheatingairconditioningandplumbing';

      // First check if we have a hardcoded phone number for this business
      if (phoneMap[currentSlug]) {
        return phoneMap[currentSlug];
      }

      // If already a string, return it
      if (typeof phone === 'string') {
        return phone;
      }

      // If null/undefined
      if (!phone) {
        return '';
      }

      // If it's an object
      if (typeof phone === 'object') {
        // Return a default phone based on the business if we have one
        if (phoneMap[currentSlug]) {
          return phoneMap[currentSlug];
        }

        // Otherwise try to extract from the object
        if (phone.phones_enricher && phone.phones_enricher.carrier_name !== undefined) {
          // Return the phone number from parent object's key
          for (const key in phone) {
            if (key !== 'phones_enricher' && typeof phone[key] === 'string') {
              return phone[key];
            }
          }
        }

        // Try common object formats
        if (phone.countryCode && phone.number) {
          return `${phone.countryCode}${phone.number}`;
        }

        if (phone.full) {
          return phone.full;
        }

        // Try to get any string property that looks like a phone
        for (const key in phone) {
          if (typeof phone[key] === 'string' && phone[key].match(/^\+?[0-9\s()-]+$/)) {
            return phone[key];
          }
        }

        // If no phone-like string found, return default phone or empty string
        return '(205) 123-4567';
      }

      // For anything else, try to convert to string
      return String(phone);
    }

    // Populate the page with business data
    function populatePage(business) {
      // Apply custom colors if available
      if (business.customization) {
        const root = document.documentElement;
        if (business.customization.primaryColor) {
          root.style.setProperty('--primary', business.customization.primaryColor);
          // Calculate a darker shade for primary-dark
          const primaryDark = adjustColor(business.customization.primaryColor, -20);
          root.style.setProperty('--primary-dark', primaryDark);
        }
        if (business.customization.secondaryColor) {
          root.style.setProperty('--secondary', business.customization.secondaryColor);
        }
      }

      // Set business name in various places
      document.querySelectorAll('#business-name-header, #business-name-hero, #business-name-about, #business-name-footer, #business-name-copyright').forEach(el => {
        el.textContent = business.name || 'HVAC Pro';
      });

      // Set phone number directly from the business data
      // This uses getPhoneAsString to handle various phone formats
      let phone = getPhoneAsString(business.phone) || '(555) 123-4567'; // Default fallback

      // Format the phone number consistently if it's just digits
      if (/^\d{10}$/.test(phone)) {
        phone = `(${phone.substring(0,3)}) ${phone.substring(3,6)}-${phone.substring(6)}`;
      }

      // Set phone in all relevant places
      document.querySelectorAll('#phone-number-header, #phone-number-cta, #phone-number-footer').forEach(el => {
        el.textContent = phone;
      });

      // Update phone links - strip non-digits for the href
      const phoneDigits = phone.replace(/[^0-9]/g, '');
      document.querySelectorAll('a[href^="tel:"]').forEach(el => {
        el.href = `tel:${phoneDigits}`;
      });

      // Set city/location information
      const city = business.city || 'Birmingham';
      const state = business.state || 'AL';
      document.getElementById('city-name').textContent = city;
      document.getElementById('city-state').textContent = `${city}, ${state}`;
      document.getElementById('location-city-state').textContent = `${city}, ${state}`;
      document.getElementById('main-service-area').textContent = city;

      // Set address
      const address = business.street ? `${business.street}, ${city}, ${state} ${business.postal_code}` : `123 Main St, ${city}, ${state} 35201`;
      document.getElementById('full-address').textContent = address;
      document.getElementById('location-address').textContent = address;

      // Set email if available
      const email = business.email || 'info@hvacpro.com';
      document.getElementById('email-footer').textContent = email;
      document.getElementById('email-footer').href = `mailto:${email}`;

      // Set working hours
      let workingHours = 'Mon-Fri: 8AM-5PM';
      if (business.working_hours) {
        try {
          const hoursObj = JSON.parse(business.working_hours);
          if (Object.keys(hoursObj).length > 0) {
            workingHours = Object.entries(hoursObj)
              .map(([day, hours]) => `${day}: ${hours}`)
              .join('<br>');
          }
        } catch (e) {
          // Fall back to default format
          workingHours = 'Mon-Fri: 8AM-5PM';
        }
      }
      document.getElementById('working-hours').innerHTML = workingHours;

      // Set social media links if available
      if (business.facebook) {
        document.getElementById('facebook-link').href = business.facebook;
      }

      // Set Google Reviews link
      if (business.reviews_link) {
        document.getElementById('google-reviews-link').href = business.reviews_link;
      } else {
        document.getElementById('google-reviews-link').href = 'https://www.google.com/maps';
      }

      // Set location phone
      document.getElementById('location-phone').textContent = phone;

      // Set location hours
      let locationHours = 'Monday - Friday: 8am - 5pm';
      if (business.working_hours) {
        try {
          const hoursObj = JSON.parse(business.working_hours);
          if (Object.keys(hoursObj).length > 0) {
            locationHours = Object.entries(hoursObj)
              .slice(0, 3) // Just show first 3 days for location section
              .map(([day, hours]) => `${day}: ${hours}`)
              .join('<br>');
          }
        } catch (e) {
          // Use default
        }
      }
      document.getElementById('location-hours').innerHTML = locationHours;

      // Set map image and directions link
      const mapImg = document.getElementById('static-map');
      const directionsLink = document.getElementById('directions-link');

      if (business.latitude && business.longitude) {
        // Create a static map using OpenStreetMap
        const lat = business.latitude;
        const lng = business.longitude;
        mapImg.src = `https://maps.googleapis.com/maps/api/staticmap?center=${lat},${lng}&zoom=14&size=600x400&markers=color:red%7C${lat},${lng}&key=YOUR_API_KEY`;

        // Fallback to OpenStreetMap if you don't have a Google Maps API key
        mapImg.src = `https://staticmap.openstreetmap.de/staticmap.php?center=${lat},${lng}&zoom=14&size=600x400&markers=${lat},${lng}`;

        // Set directions link
        if (business.location_link) {
          directionsLink.href = business.location_link;
        } else {
          directionsLink.href = `https://www.google.com/maps/dir/?api=1&destination=${lat},${lng}`;
        }
      } else {
        // Fallback map
        mapImg.src = "https://maps.googleapis.com/maps/api/staticmap?center=Birmingham,AL&zoom=12&size=600x400&key=YOUR_API_KEY";
        directionsLink.href = `https://www.google.com/maps/dir/?api=1&destination=${encodeURIComponent(address)}`;
      }

      // Set hero image from customization with timestamp to force refresh
      const heroImg = document.getElementById('hero-image');
      if (business.customization && business.customization.heroImage) {
        // Add timestamp parameter to force browser to reload the image
        const timestamp = Date.now();
        const heroUrl = business.customization.heroImage;
        const separator = heroUrl.includes('?') ? '&' : '?';
        heroImg.src = `${heroUrl}${separator}t=${timestamp}`;
      } else {
        // Default hero image
        heroImg.src = 'https://images.unsplash.com/photo-1581094794329-c8112a89af12?ixlib=rb-4.0.3&auto=format&fit=crop&w=2000&q=80';
      }

      // Set about image if available with timestamp to force refresh
      const aboutImg = document.getElementById('about-image');
      if (business.customization && business.customization.aboutImage) {
        // Add timestamp parameter to force browser to reload the image
        const timestamp = Date.now();
        const aboutUrl = business.customization.aboutImage;
        const separator = aboutUrl.includes('?') ? '&' : '?';
        aboutImg.src = `${aboutUrl}${separator}t=${timestamp}`;
      }

      // Set current year in copyright
      document.getElementById('current-year').textContent = new Date().getFullYear();

      // Update review data in header and hero section
      const headerRating = document.getElementById('header-rating');
      const headerReviews = document.getElementById('header-reviews');
      const mobileHeaderRating = document.getElementById('mobile-header-rating');
      const heroRating = document.getElementById('hero-rating-value');
      const reviewCountBadge = document.getElementById('review-count-badge');
      const cardPhoneNumber = document.getElementById('card-phone-number');

      // Set review information if available
      if (business.rating) {
        const rating = parseFloat(business.rating).toFixed(1);
        if (headerRating) headerRating.textContent = rating;
        if (mobileHeaderRating) mobileHeaderRating.textContent = rating;
        if (heroRating) heroRating.textContent = rating;
      }

      if (business.reviews) {
        const reviews = business.reviews;
        if (reviewCountBadge) reviewCountBadge.textContent = reviews + '+ Customer Reviews';
      }

      if (business.reviews) {
        const reviews = business.reviews;
        if (headerReviews) headerReviews.textContent = reviews;
      }

      // Set phone number in hero card
      if (cardPhoneNumber) {
        cardPhoneNumber.textContent = phone;
        cardPhoneNumber.href = `tel:${phoneDigits}`;
      }

      // Check if we have actual review data from the JSON file
      if (business.reviewsData && business.reviewsData.length > 0) {
        const reviewsContainer = document.getElementById('reviews-container');

        // Clear existing reviews
        reviewsContainer.innerHTML = '';

        // Create a slider container for reviews
        const sliderContainer = document.createElement('div');
        sliderContainer.className = 'reviews-slider';
        reviewsContainer.appendChild(sliderContainer);

        // Filter for 5-star reviews only
        const fiveStarReviews = business.reviewsData.filter(review => review.rating === 5);

        // If we have 5-star reviews, use them, otherwise use all reviews
        const reviewsToShow = fiveStarReviews.length > 0 ? fiveStarReviews : business.reviewsData;

        // Create review cards for each review
        reviewsToShow.forEach(review => {
          const authorInitial = (review.author_name || 'A')[0].toUpperCase();
          const reviewDate = review.date ? new Date(review.date).toLocaleDateString() : 'Recently';

          // Create stars HTML based on rating
          const rating = parseInt(review.rating) || 5;
          const starsHTML = Array(5).fill('').map((_, i) => 
            i < rating ? 
              `<i class="fa-solid fa-star"></i>` : 
              `<i class="fa-regular fa-star"></i>`
          ).join('');

          const reviewCard = document.createElement('div');
          reviewCard.className = 'review-card fade-in';
          reviewCard.innerHTML = `
            <div class="stars">${starsHTML}</div>
            <p class="review-text">"${review.text || 'Great service!'}"</p>
            <div class="reviewer">
              <div class="reviewer-img">${authorInitial}</div>
              <div>
                <div>${review.author_name || 'Anonymous'}</div>
                <div class="review-date">${reviewDate}</div>
              </div>
            </div>
          `;

          sliderContainer.appendChild(reviewCard);
        });

        // Set up the review slider functionality if we have multiple reviews
        if (reviewsToShow.length > 3) {
          // Add slider controls
          const sliderControls = document.createElement('div');
          sliderControls.className = 'slider-controls';
          sliderControls.innerHTML = `
            <div class="slider-arrow prev-arrow"><i class="fas fa-chevron-left"></i></div>
            <div class="slider-arrow next-arrow"><i class="fas fa-chevron-right"></i></div>
          `;
          reviewsContainer.appendChild(sliderControls);

          // Add progress dots
          const sliderProgress = document.createElement('div');
          sliderProgress.className =='slider-progress';

          // Calculate how many pages of reviews we have (3 per page)
          const pageCount = Math.ceil(reviewsToShow.length / 3);

          // Add dots for each page
          for (let i = 0; i < pageCount; i++) {
            const dot = document.createElement('div');
            dot.className = 'progress-dot' + (i === 0 ? ' active' : '');
            dot.dataset.index = i;
            sliderProgress.appendChild(dot);
          }

          reviewsContainer.appendChild(sliderProgress);

          // Set up auto-scrolling and manual controls
          setupReviewSlider(sliderContainer, sliderControls, sliderProgress);
        }
      }
      // Fallback to static reviews if no review data
      else if (business.reviews && parseInt(business.reviews) > 0) {
        const reviewsContainer = document.getElementById('reviews-container');

        // Clear existing reviews
        reviewsContainer.innerHTML = '';

        // We don't have actual review content, so we'll create generic ones based on rating
        const rating = parseFloat(business.rating) || 5;
        const reviewCount = Math.min(parseInt(business.reviews), 3); // Show max 3 reviews

        // Example reviews based on rating
        const reviewTemplates = [
          {
            text: "Professional service! They fixed our AC quickly and were very knowledgeable. Highly recommend!",
            name: "James D."
          },
          {
            text: "Fantastic service from start to finish. The technicians were on time, professional, and completed the work efficiently.",
            name: "Sarah M."
          },
          {
            text: "Been using their services for years. Always reliable, always professional, and always fair pricing.",
            name: "Robert J."
          }
        ];

        // Create review cards
        for (let i = 0; i < reviewCount; i++) {
          const review = reviewTemplates[i];
          const starsHTML = Array(5).fill(`<i class="fa-solid fa-star"></i>`).join('');

          const reviewCard = document.createElement('div');
          reviewCard.className = 'review-card fade-in';
          reviewCard.innerHTML = `
            <div class="stars">${starsHTML}</div>
            <p class="review-text">"${review.text}"</p>
            <div class="reviewer">
              <div class="reviewer-img">${review.name[0]}</div>
              <div>
                <div>${review.name}</div>
                <div class="review-date">Recently</div>
              </div>
            </div>
          `;

          reviewsContainer.appendChild(reviewCard);
        }
      }

      // Animate the hero image
      setTimeout(() => {
        document.getElementById('hero').classList.add('loaded');
      }, 100);
    }

    // Helper function to adjust color brightness
    function adjustColor(color, amount) {
      // Remove the leading # if it exists
      color = color.replace(/^#/, '');

      // Parse the color components
      let r = parseInt(color.slice(0, 2), 16);
      let g = parseInt(color.slice(2, 4), 16);
      let b = parseInt(color.slice(4, 6), 16);

      // Adjust the brightness
      r = Math.max(0, Math.min(255, r + amount));
      g = Math.max(0, Math.min(255, g + amount));
      b = Math.max(0, Math.min(255, b + amount));

      // Convert back to hex
      return `#${r.toString(16).padStart(2, '0')}${g.toString(16).padStart(2, '0')}${b.toString(16).padStart(2, '0')}`;
    }

    // Scroll effects for header
    function handleScroll() {
      const header = document.getElementById('header');
      if (window.scrollY > 50) {
        header.classList.add('scrolled');
      } else {
        header.classList.remove('scrolled');
      }

      // Animate elements when they come into view
      document.querySelectorAll('.fade-in').forEach(el => {
        const rect = el.getBoundingClientRect();
        const windowHeight = window.innerHeight || document.documentElement.clientHeight;

        if (rect.top <= windowHeight * 0.8 && rect.bottom >= 0) {
          el.classList.add('visible');
        }
      });
    }

    // Mobile menu toggle
    // Review slider functionality
    function setupReviewSlider(sliderContainer, sliderControls, sliderProgress) {
      let currentSlide = 0;
      let autoScrollInterval;
      const cardWidth = 350 + 32; // card width + gap
      const visibleCards = window.innerWidth < 768 ? 1 : 3;
      const totalSlides = Math.ceil(sliderContainer.children.length / visibleCards);

      // Function to scroll to a specific slide
      function scrollToSlide(slideIndex) {
        if (slideIndex < 0) slideIndex = 0;
        if (slideIndex >= totalSlides) slideIndex = totalSlides - 1;

        currentSlide = slideIndex;
        const scrollAmount = slideIndex * cardWidth * visibleCards;
        sliderContainer.scrollTo({ left: scrollAmount, behavior: 'smooth' });

        // Update active dot
        const dots = sliderProgress.querySelectorAll('.progress-dot');
        dots.forEach((dot, i) => {
          dot.classList.toggle('active', i === currentSlide);
        });
      }

      // Set up auto-scrolling
      function startAutoScroll() {
        clearInterval(autoScrollInterval);
        autoScrollInterval = setInterval(() => {
          currentSlide = (currentSlide + 1) % totalSlides;
          scrollToSlide(currentSlide);
        }, 5000); // Auto-scroll every 5 seconds
      }

      // Event listeners
      sliderControls.querySelector('.prev-arrow').addEventListener('click', () => {
        clearInterval(autoScrollInterval);
        scrollToSlide(currentSlide - 1);
        startAutoScroll();
      });

      sliderControls.querySelector('.next-arrow').addEventListener('click', () => {
        clearInterval(autoScrollInterval);
        scrollToSlide(currentSlide + 1);
        startAutoScroll();
      });

      // Dot navigation
      sliderProgress.querySelectorAll('.progress-dot').forEach((dot, index) => {
        dot.addEventListener('click', () => {
          clearInterval(autoScrollInterval);
          scrollToSlide(index);
          startAutoScroll();
        });
      });

      // Start auto-scrolling
      startAutoScroll();

      // Pause auto-scrolling on hover
      sliderContainer.addEventListener('mouseenter', () => {
        clearInterval(autoScrollInterval);
      });

      sliderContainer.addEventListener('mouseleave', () => {
        startAutoScroll();
      });

      // Handle window resize
      window.addEventListener('resize', () => {
        // Recalculate visible cards
        const newVisibleCards = window.innerWidth < 768 ? 1 : 3;
        if (newVisibleCards !== visibleCards) {
          // If the visible cards count changed, reset the slider
          scrollToSlide(0);
        }
      });
    }

    function setupMobileMenu() {
      const mobileToggle = document.getElementById('mobile-toggle');
      const navLinks = document.getElementById('nav-links');
      const mobilePhoneNumber = document.getElementById('mobile-phone-number');
      const headerPhoneNumber = document.getElementById('phone-number-header');

      // Make sure mobile phone number matches the header one
      if (mobilePhoneNumber && headerPhoneNumber) {
        mobilePhoneNumber.textContent = headerPhoneNumber.textContent;
        mobilePhoneNumber.href = headerPhoneNumber.href;
      }

      mobileToggle.addEventListener('click', () => {
        navLinks.classList.toggle('active');

        // Add overlay when menu is active
        if (navLinks.classList.contains('active')) {
          // Create overlay if it doesn't exist
          if (!document.getElementById('menu-overlay')) {
            const overlay = document.createElement('div');
            overlay.id = 'menu-overlay';
            overlay.style.position = 'fixed';
            overlay.style.top = '0';
            overlay.style.left = '0';
            overlay.style.right = '0';
            overlay.style.bottom = '0';
            overlay.style.backgroundColor = 'rgba(0,0,0,0.5)';
            overlay.style.zIndex = '998';
            overlay.style.opacity = '0';
            overlay.style.transition = 'opacity 0.3s ease';
            document.body.appendChild(overlay);

            // Fade in overlay
            setTimeout(() => {
              overlay.style.opacity = '1';
            }, 10);

            // Close menu when overlay is clicked
            overlay.addEventListener('click', () => {
              navLinks.classList.remove('active');
              overlay.style.opacity = '0';
              setTimeout(() => {
                document.body.removeChild(overlay);
              }, 300);

              // Reset icon
              const icon = mobileToggle.querySelector('i');
              icon.classList.remove('fa-xmark');
              icon.classList.add('fa-bars');
            });
          }
        } else {
          // Remove overlay when menu is closed
          const overlay = document.getElementById('menu-overlay');
          if (overlay) {
            overlay.style.opacity = '0';
            setTimeout(() => {
              document.body.removeChild(overlay);
            }, 300);
          }
        }

        // Change icon based on menu state
        const icon = mobileToggle.querySelector('i');
        if (navLinks.classList.contains('active')) {
          icon.classList.remove('fa-bars');
          icon.classList.add('fa-xmark');
        } else {
          icon.classList.remove('fa-xmark');
          icon.classList.add('fa-bars');
        }
      });

      // Close mobile menu when a nav link is clicked
      navLinks.querySelectorAll('a').forEach(link => {
        link.addEventListener('click', () => {
          navLinks.classList.remove('active');

          // Remove overlay
          const overlay = document.getElementById('menu-overlay');
          if (overlay) {
            overlay.style.opacity = '0';
            setTimeout(() => {
              document.body.removeChild(overlay);
            }, 300);
          }

          // Reset icon
          const icon = mobileToggle.querySelector('i');
          icon.classList.remove('fa-xmark');
          icon.classList.add('fa-bars');
        });
      });
    }

    // Initialize everything when the DOM is ready
    document.addEventListener('DOMContentLoaded', () => {
      // Load business data based on URL
      getBusinessData();

      // Set up scroll effects
      window.addEventListener('scroll', handleScroll);

      // Set up mobile menu
      setupMobileMenu();

      // Trigger initial scroll effects
      handleScroll();
    });
  </script>
  <!-- Chat Widget -->
  <div id="chat-widget">
    <div class="chat-button" id="chat-toggle-btn">
      <i class="fas fa-comment"></i>
    </div>
    <div class="chat-popup" id="chat-popup">
      <div class="chat-header">
        <h5>Get in Touch</h5>
        <button class="chat-close" id="chat-close-btn">&times;</button>
      </div>
      <div class="chat-body">
        <div class="chat-intro">
          <div class="intro-icon">
            <i class="fas fa-fan"></i>
          </div>
          <h3>How can we help you?</h3>
          <p>Send us a message and we'll respond as soon as possible.</p>
        </div>
        <form id="chat-form" class="chat-form">
          <input type="text" id="chat-name" class="chat-input" placeholder="Your Name" required>
          <input type="text" id="chat-phone" class="chat-input" placeholder="Your Phone Number" required>
          <input type="email" id="chat-email" class="chat-input" placeholder="Your Email (optional)">
          <textarea id="chat-message" class="chat-textarea" placeholder="Describe what you need help with..." required></textarea>
          <button type="submit" class="chat-send-btn">
            <span>Send Message</span>
            <i class="fas fa-paper-plane"></i>
          </button>
        </form>
        <div class="chat-submitted" style="display: none;">
          <div class="success-message">
            <i class="fas fa-check-circle"></i>
            <h4>Thank You!</h4>
            <p>We've received your message and will get back to you soon.</p>
            <button id="chat-new-message-btn" class="chat-new-btn">Send Another Message</button>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Chat Widget Styles -->
  <style>
    #chat-widget {
      position: fixed;
      bottom: 20px;
      right: 20px;
      z-index: 1000;
      font-family: var(--font-main);
    }

    .chat-button {
      width: 60px;
      height: 60px;
      border-radius: 50%;
      background-color: var(--primary);
      color: white;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 24px;
      cursor: pointer;
      box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
      transition: all 0.3s ease;
    }

    .chat-button:hover {
      transform: scale(1.05);
      background-color: var(--primary-dark);
    }

    .chat-popup {
      position: absolute;
      bottom: 80px;
      right: 0;
      width: 350px;
      background-color: white;
      border-radius: 16px;
      box-shadow: 0 5px 30px rgba(0, 0, 0, 0.2);
      display: none;
      overflow: hidden;
      transition: all 0.3s ease;
      opacity: 0;
      transform: translateY(20px);
    }

    .chat-popup.active {
      display: block;
      opacity: 1;
      transform: translateY(0);
    }

    .chat-header {
      background-color: var(--primary);
      color: white;
      padding: 15px 20px;
      display: flex;
      justify-content: space-between;
      align-items: center;
      border-bottom: 1px solid rgba(255,255,255,0.1);
    }

    .chat-header h5 {
      margin: 0;
      font-weight: 600;
      font-size: 1.1rem;
    }

    .chat-close {
      background: none;
      border: none;
      color: white;
      font-size: 24px;
      cursor: pointer;
      line-height: 1;
    }

    .chat-body {
      padding: 0;
      max-height: 500px;
      display: flex;
      flex-direction: column;
    }

    .chat-intro {
      text-align: center;
      padding: 25px 20px 15px;
    }

    .intro-icon {
      width: 60px;
      height: 60px;
      background-color: var(--primary);
      color: white;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 24px;
      margin: 0 auto 15px;
    }

    .chat-intro h3 {
      margin: 0 0 10px;
      font-size: 1.3rem;
      color: var(--dark);
    }

    .chat-intro p {
      color: var(--gray);
      margin: 0;
      font-size: 0.95rem;
    }

    .chat-form {
      padding: 20px;
      display: flex;
      flex-direction: column;
      gap: 15px;
    }

    .chat-input, .chat-textarea {
      width: 100%;
      padding: 12px 15px;
      border: 1px solid #e0e0e0;
      border-radius: 8px;
      font-size: 0.95rem;
      transition: all 0.3s ease;
    }

    .chat-input:focus, .chat-textarea:focus {
      border-color: var(--primary);
      outline: none;
      box-shadow: 0 0 0 3px rgba(0, 114, 206, 0.1);
    }

    .chat-textarea {
      min-height: 100px;
      resize: none;
    }

    .chat-send-btn {
      background-color: var(--primary);
      color: white;
      border: none;
      border-radius: 8px;
      padding: 12px;
      font-weight: 600;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 8px;
      transition: all 0.3s ease;
    }

    .chat-send-btn:hover {
      background-color: var(--primary-dark);
      transform: translateY(-2px);
    }

    .chat-send-btn i {
      font-size: 0.85rem;
    }

    .chat-submitted {
      padding: 30px 20px;
      text-align: center;
    }

    .success-message {
      display: flex;
      flex-direction: column;
      align-items: center;
    }

    .success-message i {
      font-size: 3rem;
      color: #28a745;
      margin-bottom: 15px;
    }

    .success-message h4 {
      margin: 0 0 10px;
      font-size: 1.5rem;
      color: var(--dark);
    }

    .success-message p {
      color: var(--gray);
      margin: 0 0 20px;
    }

    .chat-new-btn {
      background-color: transparent;
      color: var(--primary);
      border: 1px solid var(--primary);
      border-radius: 8px;
      padding: 10px 20px;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.3s ease;
    }

    .chat-new-btn:hover {
      background-color: var(--primary);
      color: white;
    }

    @media (max-width: 576px) {
      .chat-popup {
        width: 310px;
        right: 0;
      }
    }
  </style>

  <!-- Chat Widget Script -->
  <script>
    document.addEventListener('DOMContentLoaded', function() {
      const chatToggleBtn = document.getElementById('chat-toggle-btn');
      const chatCloseBtn = document.getElementById('chat-close-btn');
      const chatPopup = document.getElementById('chat-popup');
      const chatForm = document.getElementById('chat-form');
      const chatSubmitted = document.querySelector('.chat-submitted');
      const newMessageBtn = document.getElementById('chat-new-message-btn');
      const chatOpenBtn = document.getElementById('chat-open-btn');

      // Get business slug from URL
      const pathParts = window.location.pathname.split('/').filter(Boolean);
      const slug = pathParts[0] || 'stegallheatingairconditioningandplumbing'; // Fallback to first business
      console.log('Using slug for chat:', slug);

      // Toggle chat popup
      chatToggleBtn.addEventListener('click', function() {
        chatPopup.classList.toggle('active');
      });

      // Open chat from hero button
      if (chatOpenBtn) {
        chatOpenBtn.addEventListener('click', function(e) {
          e.preventDefault();
          chatPopup.classList.add('active');
        });
      }

      // Close chat popup
      chatCloseBtn.addEventListener('click', function() {
        chatPopup.classList.remove('active');
      });

      // Handle form submission
      chatForm.addEventListener('submit', async function(e) {
        e.preventDefault();

        const name = document.getElementById('chat-name').value;
        const email = document.getElementById('chat-email').value;
        const phone = document.getElementById('chat-phone').value;
        const message = document.getElementById('chat-message').value;

        if (!message.trim()) {
          return;
        }

        try {
          // Send message to server
          const response = await fetch('/api/chat-message', {
            method: 'POST',
            headers: {
              'Content-Type': 'application/json'
            },
            body: JSON.stringify({
              slug,
              name,
              email,
              phone,
              message
            })
          });

          if (response.ok) {
            // Show success message
            chatForm.style.display = 'none';
            chatSubmitted.style.display = 'block';
          } else {
            const data = await response.json();
            alert(data.error || 'Failed to send message. Please try again.');
          }
        } catch (error) {
          console.error('Error sending message:', error);
          alert('Failed to send message. Please try again.');
        }
      });

      // New message button
      newMessageBtn.addEventListener('click', function() {
        chatForm.reset();
        chatForm.style.display = 'block';
        chatSubmitted.style.display = 'none';
      });
    });
  </script>
</body>
</html>